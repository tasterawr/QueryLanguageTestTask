# QueryLanguageTestTask

Для разработки использовался пример построения анализатора кода из вузовской дисциплины Теория формальных языков и трансляций. Анализ запросов производится с помощью трех
основных классов: лексический анализатор QueryLexemeAnalyser, синтаксический анализатор QuerySyntaxAnalyser и исполнитель команд QueryExecutor. Классы по очереди вызывают
друг друга и работают с возвращенным результатом.

### QueryLexemeAnalyser

В основе лежит конечный детерминированный автомат, который посимвольно считывает введенный запрос и выделяет в нем отдельные лексемы. Каждой лексеме присваивается
метаинформация в виде ее значения, позиции, типа и класса. Полученный список лексем *lexemes* передается в синтаксический анализатор.

### QuerySyntaxAnalyser

Содержит набор методов, которые перебирая список лексем, проверяют правильность синтаксиса введенного запроса и выдают ошибку в случае, если в некоторой позиции 
ожидалась лексема другогокласса/типа (например,после оператора INSERT не указан оператор VALUES). На основе анализа собирается последовательность операндов 
и операторов (команд) *entryList*, которая будет использована для выполнения запроса.

### QueryExecutor

Последовательно обрабатывает список полученных команд и операндов. Операнды помещаются в стек, команды вызывают методы, в которых операнды извлекаются из стека и 
с ними производится необходимая операция. Данные берутся из класса *DataStorage*, обрабатываются с помощью Stream API. При выполнении условных операторов из хранилища
выбираются списки данных, удовлетворяющие условиям и помещаемые в список *filters*. При выполнении операторов AND и OR происходит объединение этих списков нужным образом
(пересечение или объединение в единое множество соответственно).

## Класс Main

В классе Main прописан ряд запросов для тестирования и иллюстрации работы. Также закомментирован вызов метода *startUI()*, который запускает режим консольного ввода 
запросов (выход командой exit).

## Примеры работы

Выполнение INSERT запросов

![updateEx](https://user-images.githubusercontent.com/70659948/227926185-9a7d3502-6083-4165-841c-28e83dbdc441.JPG)

Выполнение SELECT до обновления данных

![image](https://user-images.githubusercontent.com/70659948/227931027-60f84804-4724-4050-a52e-a2c0e6cefb4d.png)

Выполнение UPDATE запроса

![image](https://user-images.githubusercontent.com/70659948/227930875-148bcc2b-118f-4ced-94ac-8b138a1ce191.png)

Выполнение SELECT после обновления данных

![image](https://user-images.githubusercontent.com/70659948/227931079-4c90d78c-e756-4e70-8719-b34b0f5341c8.png)

Выполнение DELETE запроса

![image](https://user-images.githubusercontent.com/70659948/227931834-25b1c670-ebb3-465d-b41f-8d1fc2b2c5b0.png)

Выполнение SELECT запроса после удаления части данных

![image](https://user-images.githubusercontent.com/70659948/227931969-e4e71af2-594e-4617-ae6f-f6b9332b7cf1.png)

## Примеры выпадающих ошибок

![image](https://user-images.githubusercontent.com/70659948/227935495-62e65d3a-e794-4bda-9a98-c30f9ae566b7.png)

![image](https://user-images.githubusercontent.com/70659948/227935621-f97cfb66-832b-47e9-b757-b83bfdfa383f.png)

![image](https://user-images.githubusercontent.com/70659948/227935730-b2b87862-bfe3-4454-8633-2a15599baa3f.png)

![image](https://user-images.githubusercontent.com/70659948/227935923-36266b93-3bda-42c4-be12-7be4ad0f98ba.png)

